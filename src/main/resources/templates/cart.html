<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tech2etc Ecommerce Tutorial</title>
  <link rel="stylesheet" href="./style.css" />
  <link rel="stylesheet" th:href="@{/css/style1.css}">
  <script src="https://kit.fontawesome.com/bea9b25826.js" crossorigin="anonymous"></script>

  <script>
    function updateCartDisplay() {
      var cart = JSON.parse(localStorage.getItem("cart")) || [];
      var cartItemsContainer = document.querySelector(".mini-cart .products");
      var cartTableBody = document.querySelector("#cart tbody");
      cartItemsContainer.innerHTML = "";
      cartTableBody.innerHTML = "";

      var totalQuantity = 0;
      var totalPrice = 0;

      cart.forEach(function(item, index) {
        totalQuantity += item.quantity;
        totalPrice += item.price * item.quantity;

        var cartItem = document.createElement("li");
        cartItem.classList.add("item");
        cartItem.innerHTML = `
        <div class="thumbnail object-cover">
            <a href="#"><img src="${item.img}" alt=""></a>
        </div>
        <div class="item-content">
            <p><a href="#" style="font-size: 14px">${item.name}</a></p>
            <span class="price">
                <span>$${item.price} - ${item.size} - ${item.color}</span>
                <button class="fly-item" onclick="removeFromCart(${index})"><span>X</span></button>
            </span>
            <div class="qty-control flexitem">
                <button class="minus" onclick="updateQuantity(${index}, -1)">-</button>
                <input type="text" value="${item.quantity}" min="1">
                <button class="plus" onclick="updateQuantity(${index}, 1)">+</button>
            </div>
        </div>
        <a href="" class="item-remove" onclick="removeFromCart(${index})"><i class="ri-close-line"></i></a>
      `;
        cartItemsContainer.appendChild(cartItem);

        var row = document.createElement("tr");
        row.innerHTML = `
        <td><a href="#" onclick="removeFromCart(${index})"><i class="fa-regular fa-circle-xmark"></i></a></td>
        <td><img src="${item.img}" alt=""></td>
        <td>${item.name}</td>
        <td>$${item.price}</td>
        <td>
            <div class="qty-control flexitem">
                <button class="minus" onclick="updateQuantity(${index}, -1)">-</button>
                <input type="text" value="${item.quantity}" min="1" onchange="updateQuantity(${index}, this.value)">
                <button class="plus" onclick="updateQuantity(${index}, 1)">+</button>
            </div>
        </td>
        <td>$${(item.price * item.quantity).toFixed(2)}</td>
      `;
        cartTableBody.appendChild(row);
      });

      document.querySelector(".cart-head").innerText = `${totalQuantity} items in cart`;
      document.querySelector(".fly-item .item-number").innerText = totalQuantity;
      document.querySelector(".subtotal p strong").innerText = `$${totalPrice.toFixed(2)}`;
      document.querySelector(".total-checkout").innerText = ` $${totalPrice.toFixed(2)}`;
    }

    function removeFromCart(index) {
      var cart = JSON.parse(localStorage.getItem("cart")) || [];
      cart.splice(index, 1);
      localStorage.setItem("cart", JSON.stringify(cart));
      updateCartDisplay();
    }

    function updateQuantity(index, change) {
      var cart = JSON.parse(localStorage.getItem("cart")) || [];
      cart[index].quantity = Math.max(1, parseInt(cart[index].quantity) + parseInt(change));
      localStorage.setItem("cart", JSON.stringify(cart));
      updateCartDisplay();
    }

    document.addEventListener("DOMContentLoaded", updateCartDisplay);
  </script>

  <script>
    function placeOrder() {
      var cart = JSON.parse(localStorage.getItem("cart")) || [];
      if (cart.length === 0) {
        alert("Your cart is empty!");
        return;
      }
      //remove
      //   localStorage.removeItem("cart");
      //   updateCartDisplay();
        alert("Order placed successfully!");

    }


  </script>

</head>
<body>
<section id="header">
  <a  th:href="@{/index}" >
    <img th:src="@{/img/logo.png}"  class="logo" alt="logo" />
  </a>

  <div>
    <ul id="navbar">
      <li><a th:href="@{/index}">Home</a></li>
      <li><a th:href="@{/shop}">Shop</a></li>
      <li><a th:href="@{/blog}">Blog</a></li>
      <li><a th:href="@{/about}">About</a></li>
      <li><a th:href="@{/contact}">Contact</a></li>
      <li id="lg-bag">
        <a class="active"   th:href="@{/cart}"><i class="fa-solid fa-bag-shopping"></i></a>
      </li>

      <li class="iscart">
        <a href="#">
          <div class="icon-large" style="display: flex">
            <div class="fly-item"><span class="item-number" style="
    position: absolute;
        top: -22px;
    left: 28px;
    color: green;
">5</span></div>
            <i class="fa-solid fa-shopping-cart"></i>
          </div>

        </a>
        <div class="mini-cart">
          <div class="content">
            <div class="cart-head">
              5 items in cart
            </div>
            <div class="cart-body">
              <ul class="products mini">
                <li class="item">
                  <div class="thumbnail object-cover">
                    <a href="#"><img th:src="@{/img/products/n1.jpg}" alt=""></a>
                  </div>
                  <div class="item-content">
                    <p><a href="#" style="font-size: 14px">Dimmable Ceiling Light Modern</a></p>
                    <span class="price">
                                                            <span>$279.99 - XL - Xanh</span>
                                                            <button class="fly-item"><span>X</span></button>

                                                        </span>
                    <div class="qty-control flexitem">
                      <button class="minus">-</button>
                      <input type="text" value="2" min="1">
                      <button class="plus">+</button>
                    </div>
                  </div>
                  <a href="" class="item-remove"><i class="ri-close-line"></i></a>
                </li>
                <li class="item">
                  <div class="thumbnail object-cover">
                    <a href="#"><img th:src="@{/img/products/n1.jpg}" alt=""></a>
                  </div>
                  <div class="item-content">
                    <p><a href="#" style="font-size: 14px">Modern Storage Cabinet with Door & 3
                      Drawers</a></p>
                    <span class="price">
                                                            <span>$129.99 - L - Vàng</span>
                                                            <button class="fly-item"><span>X</span></button>
                                                        </span>
                    <div class="qty-control flexitem">
                      <button class="minus">-</button>
                      <input type="text" value="2" min="1">
                      <button class="plus">+</button>
                    </div>
                  </div>
                  <a href="" class="item-remove"><i class="ri-close-line"></i></a>
                </li>
                <li class="item">
                  <div class="thumbnail object-cover">
                    <a href="#"><img th:src="@{/img/products/n1.jpg}" alt=""></a>
                  </div>
                  <div class="item-content">
                    <p><a href="#" style="font-size: 14px">Vonanda Velvet Sofa Couch</a></p>
                    <span class="price">
                                                            <span>$352.99 - M - Trắng</span>
                                                            <button class="fly-item"><span>X</span></button>
                                                        </span>
                    <div class="qty-control flexitem">
                      <button class="minus">-</button>
                      <input type="text" value="2" min="1">
                      <button class="plus">+</button>
                    </div>
                  </div>
                  <a href="" class="item-remove"><i class="ri-close-line"></i></a>
                </li>
                <li class="item">
                  <div class="thumbnail object-cover">
                    <a href="#"><img th:src="@{/img/products/n1.jpg}" alt=""></a>
                  </div>
                  <div class="item-content">
                    <p><a href="#" style="font-size: 14px">Awesome Bed for a Couple</a></p>
                    <span class="price">
                                                            <span>$579.99</span>
                                                            <button class="fly-item"><span>X</span></button>
                                                        </span>
                    <div class="qty-control flexitem">
                      <button class="minus">-</button>
                      <input type="text" value="2" min="1">
                      <button class="plus">+</button>
                    </div>
                  </div>
                  <a href="" class="item-remove"><i class="ri-close-line"></i></a>
                </li>
                <li class="item">
                  <div class="thumbnail object-cover">
                    <a href="#"><img th:src="@{/img/products/n1.jpg}" alt=""></a>
                  </div>
                  <div class="item-content">
                    <p><a href="#" style="font-size: 14px">Dimmable Ceiling Light Modern</a></p>
                    <span class="price">
                                                            <span>$279.99</span>
                                                            <button class="fly-item"><span>X</span></button>
                                                        </span>
                    <div class="qty-control flexitem">
                      <button class="minus">-</button>
                      <input type="text" value="2" min="1">
                      <button class="plus">+</button>
                    </div>
                  </div>
                  <a href="" class="item-remove"><i class="ri-close-line"></i></a>
                </li>
              </ul>
            </div>
            <div class="cart-footer">
              <div class="subtotal">
                <p>Subtotal</p>
                <p><strong>$1,622.95</strong></p>
              </div>
              <div class="actions">
                <a th:href="@{/cart}" class="primary-button">Checkout</a>

              </div>
            </div>
          </div>
        </div>
      </li>
      <a href="#" id="close"><i class="fa-solid fa-xmark"></i></a>
    </ul>
  </div>

  <div id="mobile">
    <a href="cart.html"><i class="fa-solid fa-bag-shopping"></i></a>
    <i id="bar" class="fas fa-outdent"></i>
  </div>
</section>

<section id="page-header" class="about-header">
  <h2>#Your_cart <i class="fa-solid fa-shopping-cart"></i>
  </h2>
  <p>LEAVE A MESSAGE, We love to hear from you!</p>
</section>

<section id="cart" class="section-p1">
  <table width="100%">
    <thead>
    <tr>
      <td>Remove</td>
      <td>Image</td>
      <td>Product</td>
      <td>Price</td>
      <td>Quantity</td>
      <td>Subtotal</td>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td><a href="#"><i class="fa-regular fa-circle-xmark"></i></a></td>
      <td><img src="./img/products/f1.jpg" alt=""></td>
      <td>Cartoon Astronaut T-Shirts</td>
      <td>$118.19</td>
      <td>  <div class="qty-control flexitem">
        <button class="minus">-</button>
        <input type="text" value="2" min="1">
        <button class="plus">+</button>
      </div></td>
      <td>$118.19</td>
    </tr>
    <tr>
      <td><a href="#"><i class="fa-regular fa-circle-xmark"></i></a></td>
      <td><img src="./img/products/f2.jpg" alt=""></td>
      <td>Cartoon Astronaut T-Shirts</td>
      <td>$118.19</td>
      <td><input type="number" value="1"></td>
      <td>$118.19</td>
    </tr>
    <tr>
      <td><a href="#"><i class="fa-regular fa-circle-xmark"></i></a></td>
      <td><img src="./img/products/f3.jpg" alt=""></td>
      <td>Cartoon Astronaut T-Shirts</td>
      <td>$118.19</td>
      <td><input type="number" value="1"></td>
      <td>$118.19</td>
    </tr>
    </tbody>
  </table>
</section>


<!--<section class="section-p1">-->
<!--  <h2>#Checkout <i class="fa-solid fa-credit-card"></i></h2>-->

<!--</section>-->

<section id="cart-add" class="section-p1">

  <div id="coupon">
    <h3>Billing address</h3>
    <div>
      <div >Fullname *</div>
      <input type="text" id="fullname" placeholder="Enter Your Fullname">
      <div >Phone Number *</div>
      <input type="text" id="phone" placeholder="Enter Your Phone Number">
      <div >Address *</div>
      <input type="text" id="address" placeholder="Enter Your Address">
      <button class="normal">Change information</button>
    </div>

  </div>

  <div id="subtotal">
    <h3>Cart Totals</h3>
    <table>
      <tr>
        <td>Shipping</td>
        <td>Free</td>
      </tr>
      <tr>
        <td><strong >Total Price</strong></td>
        <td><p class="total-checkout">$ 1,600</p></td>
      </tr>
    </table>
<!--    <a th:href="@{/order}">-->
    <button class="normal" onclick="placeOrder()">>
      Place Order!
    </button>
  </div>
</section>

<footer class="section-p1">
  <div class="col">
    <img class="logo" src="./img/logo.png" alt="" />
    <h4>Contact</h4>
    <p><strong>Address:</strong> 562 Welligton Road, Street 32, San Francisco</p>
    <p><strong>Phone:</strong> +01 2222 365 /(+91) 01 2345 6789</p>
    <p><strong>Hours:</strong> 10:00 - 18.00, Mon - Sat</p>
    <div class="follow">
      <h4>Follow</h4>
      <div class="icon">
        <i class="fab fa-facebook-f"></i>
        <i class="fab fa-twitter"></i>
        <i class="fab fa-instagram"></i>
        <i class="fab fa-pinterest-p"></i>
        <i class="fab fa-youtube"></i>
      </div>
    </div>
  </div>

  <div class="col">
    <h4>About</h4>
    <a href="#">About us</a>
    <a href="#">Delivery information</a>
    <a href="#">Privacy Policy</a>
    <a href="#">Terms & Conditions</a>
    <a href="#">Contact Us</a>
  </div>

  <div class="col">
    <h4>My Account</h4>
    <a href="#">Sign In</a>
    <a href="#">View Cart</a>
    <a href="#">My Wishlist</a>
    <a href="#">Track My Order</a>
    <a href="#">Help</a>
  </div>

  <div class="col install">
    <h4>Install App</h4>
    <p>From App Store or Google Play</p>
    <div class="row">
      <img src="./img/pay/app.jpg" alt="" />
      <img src="./img/pay/play.jpg" alt="" />
    </div>
    <p>Secured Payment Gateways</p>
    <img src="./img/pay/pay.png" alt="" />
  </div>

  <div class="copyright">
    <p>2021, Tech2 etc - HTML CSS Ecommerce Template</p>
  </div>
</footer>

<script src="/js/script.js"></script>
</body>
</html>
